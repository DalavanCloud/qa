<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Test Flags</title>
  </head>

  <body>
    <table cellpadding="1" cellspacing="1" border="1">
      <thead>
        <tr>
          <td rowspan="1" colspan="3">Bugzilla Test Flags</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>loadConfigFileAndWait</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>storeParams</td>
          <td>inst branch master_group admin_user_login admin_user_passwd admin_user_username
              canconfirm_user_login unprivileged_user_login unprivileged_user_passwd unprivileged_user_username</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>open</td>
        <td>${inst}relogin.cgi</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Logged Out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log in again.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Log in to Bugzilla</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@name='GoAheadAndLogIn' and @value='Log in']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Main Page</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumBugFlag1Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumBugFlag1Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>bugflag1</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>bugflag1</td>
      </tr>
      <tr>
        <td>select</td>
        <td>product</td>
        <td>label=TestProduct</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>product</td>
        <td>label=TestProduct</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-include</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>inclusion_to_remove</td>
        <td>label=__Any__:__Any__</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>inclusion_to_remove</td>
        <td>label=__Any__:__Any__</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-removeInclusion</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>product</td>
        <td>label=QA-Selenium-TEST</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>product</td>
        <td>label=QA-Selenium-TEST</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-include</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>product</td>
        <td>label=QA-Selenium-TEST</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>product</td>
        <td>label=QA-Selenium-TEST</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-exclude</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Bugs</td>
        <td>&nbsp;</td>
      </tr>
      <!-- The sort order is important! -->
      <!-- regexp: or any other valid pattern is required in front of TestProduct:,
           else Selenium extracts TestProduct: as the pattern, which doesn't exist -->
      <tr>
        <td>verifySelectOptions</td>
        <td>inclusion_to_remove</td>
        <td>QA-Selenium-TEST:__Any__,regexp:TestProduct:__Any__</td>
      </tr>
      <tr>
        <td>verifySelectOptions</td>
        <td>exclusion_to_remove</td>
        <td>QA-Selenium-TEST:__Any__</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>900</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>900</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>cc_list</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_active</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requestable</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requesteeble</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_multiplicable</td>
        <td>on</td>
      </tr>
      <tr>
        <td>select</td>
        <td>grant_group</td>
        <td>label=admin</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>grant_group</td>
        <td>label=admin</td>
      </tr>
      <tr>
        <td>select</td>
        <td>request_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>request_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Save Changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumBugFlag1Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumBugFlag1Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flagtype1_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=copy&id=${flagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type Based on SeleniumBugFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumBugFlag2Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumBugFlag2Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>bugflag2</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>bugflag2</td>
      </tr>
      <!-- The sort order is important! It must be the same as before -->
      <!-- regexp: or any other valid pattern is required in front of TestProduct:,
           else Selenium extracts TestProduct: as the pattern, which doesn't exist -->
      <tr>
        <td>verifySelectOptions</td>
        <td>inclusion_to_remove</td>
        <td>QA-Selenium-TEST:__Any__,regexp:TestProduct:__Any__</td>
      </tr>
      <tr>
        <td>verifySelectOptions</td>
        <td>exclusion_to_remove</td>
        <td>QA-Selenium-TEST:__Any__</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>950</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>950</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_active</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requestable</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requesteeble</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_multiplicable</td>
        <td>on</td>
      </tr>
      <tr>
        <td>type</td>
        <td>cc_list</td>
        <td>${canconfirm_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>cc_list</td>
        <td>${canconfirm_user_login}</td>
      </tr>
      <!-- It's a copy, so the grant group must already be 'admin' -->
      <tr>
        <td>verifySelected</td>
        <td>grant_group</td>
        <td>label=admin</td>
      </tr>
      <tr>
        <td>select</td>
        <td>request_group</td>
        <td>label=editbugs</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>request_group</td>
        <td>label=editbugs</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Create']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumBugFlag2Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumBugFlag2Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flagtype2_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=copy&id=${flagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type Based on SeleniumBugFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumBugFlag3Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumBugFlag3Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>bugflag3</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>bugflag3</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>980</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>980</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_active</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requestable</td>
        <td>on</td>
      </tr>
      <tr>
        <td>click</td>
        <td>is_requesteeble</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_requesteeble</td>
        <td>off</td>
      </tr>
      <tr>
        <td>click</td>
        <td>is_multiplicable</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_multiplicable</td>
        <td>off</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>cc_list</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>grant_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>grant_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>request_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Create']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumBugFlag3Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumBugFlag3Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flagtype3_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Create Flag Type For Attachments</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Attachments</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag1Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag1Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>attachmentflag1</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>attachmentflag1</td>
      </tr>
      <tr>
        <td>select</td>
        <td>product</td>
        <td>label=TestProduct</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>product</td>
        <td>label=TestProduct</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-include</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Attachments</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>inclusion_to_remove</td>
        <td>label=__Any__:__Any__</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>inclusion_to_remove</td>
        <td>label=__Any__:__Any__</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>categoryAction-removeInclusion</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type for Attachments</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Again this stupid 'regexp:' hack to make Selenium happy -->
      <tr>
        <td>verifySelectOptions</td>
        <td>inclusion_to_remove</td>
        <td>regexp:TestProduct:__Any__</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>700</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>700</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>cc_list</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>grant_group</td>
        <td>label=editbugs</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>grant_group</td>
        <td>label=editbugs</td>
      </tr>
      <tr>
        <td>select</td>
        <td>request_group</td>
        <td>label=canconfirm</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>request_group</td>
        <td>label=canconfirm</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Save Changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag1Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumAttachmentFlag1Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>aflagtype1_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=copy&id=${aflagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type Based on SeleniumAttachmentFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag2Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag2Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>attachmentflag2</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>attachmentflag2</td>
      </tr>
      <tr>
        <td>verifySelectOptions</td>
        <td>inclusion_to_remove</td>
        <td>regexp:TestProduct:__Any__</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>750</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>750</td>
      </tr>
      <tr>
        <td>type</td>
        <td>cc_list</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>cc_list</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>click</td>
        <td>is_multiplicable</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_multiplicable</td>
        <td>off</td>
      </tr>
      <tr>
        <td>select</td>
        <td>grant_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>grant_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>select</td>
        <td>request_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>request_group</td>
        <td>label=(no group)</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Create']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag2Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumAttachmentFlag2Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>aflagtype2_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=copy&id=${aflagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create Flag Type Based on SeleniumAttachmentFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag3Test</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>name</td>
        <td>SeleniumAttachmentFlag3Test</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>attachmentflag3</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>attachmentflag3</td>
      </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>800</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>800</td>
      </tr>
      <tr>
        <td>click</td>
        <td>is_active</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>is_active</td>
        <td>off</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Create']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag3Test has been created</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=SeleniumAttachmentFlag3Test</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>aflagtype3_id</td>
      </tr>
      <!-- OK, all flag types we need have been created -->
      <tr>
        <td>clickAndWait</td>
        <td>link=New</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We don't want to fail if classifications are in use -->
      <tr>
        <td><b>assertNoErrorOnNextAndGoto</b></td>
        <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
        <td>jump_classification_end_1</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Unclassified</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>jump_classification_end_1</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug: TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>short_desc</td>
        <td>test flags</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>short_desc</td>
        <td>test flags</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>this bug is used by Selenium to test flags</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>this bug is used by Selenium to test flags</td>
      </tr>
      <tr>
        <td>click</td>
        <td>bit-${master_group}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertValue</td>
        <td>bit-${master_group}</td>
        <td>on</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@type='submit' and @value='    Commit    ']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>regexp:Bug \d+ Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Save the bug ID. We will come back to it later -->
      <tr>
        <td>storeValue</td>
        <td>//input[@name='id' and @type='hidden']</td>
        <td>bug1_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- All 3 flag types must be available, we are in the TestProduct product -->
      <tr>
        <td>verifyTextPresent</td>
        <td>SeleniumBugFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//select[@id="flag_type-${flagtype1_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//input[@id="requestee_type-${flagtype1_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>SeleniumBugFlag2Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//select[@id="flag_type-${flagtype2_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//input[@id="requestee_type-${flagtype2_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>SeleniumBugFlag3Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//select[@id="flag_type-${flagtype3_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <!-- This one is not specifically requestable -->
      <tr>
        <td>verifyElementNotPresent</td>
        <td>//input[@id="requestee_type-${flagtype3_id}"]</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Test requests. That the testcase where the probability to crash (due to the MTA) is the highest -->
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype3_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype3_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>Setting all 3 flags to ?</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>Setting all 3 flags to ?</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Make sure the flags are correctly set and store their IDs -->
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumBugFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>storeAttribute</td>
        <td>//select[@title="bugflag1"]@id</td>
        <td>flagid</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flagid}</td>
        <td>(?:flag-(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flag1_1_id</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@id="flag-${flag1_1_id}"]</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumBugFlag2Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>storeAttribute</td>
        <td>//select[@title="bugflag2"]@id</td>
        <td>flagid</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flagid}</td>
        <td>(?:flag-(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flag2_1_id</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@id="flag-${flag2_1_id}"]</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumBugFlag3Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>storeAttribute</td>
        <td>//select[@title="bugflag3"]@id</td>
        <td>flagid</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flagid}</td>
        <td>(?:flag-(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flag3_1_id</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@id="flag-${flag3_1_id}"]</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>addl. SeleniumBugFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>addl. SeleniumBugFlag2Test</td>
        <td>&nbsp;</td>
      </tr>
      <!-- This one is not multiplicable, and we already use it -->
      <tr>
        <td>verifyTextNotPresent</td>
        <td>addl. SeleniumBugFlag3Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\-</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\-</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Now test requests with requestee -->
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>type</td>
        <td>requestee_type-${flagtype1_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>requestee_type-${flagtype1_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${flagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <!-- First then with a user who is not in the Master group -->
      <tr>
        <td>type</td>
        <td>requestee_type-${flagtype2_id}</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>requestee_type-${flagtype2_id}</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Requestee Not Authorized</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>goBackAndWait</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>requestee_type-${flagtype2_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>requestee_type-${flagtype2_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Now modify existing flags -->
      <tr>
        <td>select</td>
        <td>flag-${flag1_1_id}</td>
        <td>value=X</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag-${flag1_1_id}</td>
        <td>value=X</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag-${flag2_1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag-${flag2_1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag-${flag3_1_id}</td>
        <td>label=regexp:\-</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag-${flag3_1_id}</td>
        <td>label=regexp:\-</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Add an attachment</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create New Attachment for Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>data</td>
        <td>/var/www/html/selenium/bugzilla/patch.diff</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>data</td>
        <td>patch.diff</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>patch, v1</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>patch, v1</td>
      </tr>
      <tr>
        <td>click</td>
        <td>ispatch</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>ispatch</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>SeleniumAttachmentFlag1Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>SeleniumAttachmentFlag2Test</td>
        <td>&nbsp;</td>
      </tr>
      <!-- This flag type is inactive -->
      <tr>
        <td>verifyTextNotPresent</td>
        <td>SeleniumAttachmentFlag3Test</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>patch for testing purposes only</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>patch for testing purposes only</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Changes Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Retrieve the attachment ID -->
      <tr>
        <td>storeAttribute</td>
        <td>//a[@title='patch, v1']@href</td>
        <td>alink</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${alink}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>attachment1_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Create Another Attachment to Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create New Attachment for Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>data</td>
        <td>/var/www/html/selenium/bugzilla/patch.diff</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>data</td>
        <td>patch.diff</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>patch, v2</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>patch, v2</td>
      </tr>
      <tr>
        <td>click</td>
        <td>ispatch</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>ispatch</td>
        <td>on</td>
      </tr>
      <!-- Mark the previous attachment as obsolete -->
      <tr>
        <td>click</td>
        <td>${attachment1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>${attachment1_id}</td>
        <td>on</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>type</td>
        <td>requestee_type-${aflagtype1_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>requestee_type-${aflagtype1_id}</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\?</td>
      </tr>
      <!-- Request from a user who is not in the Master group -->
      <tr>
        <td>type</td>
        <td>requestee_type-${aflagtype2_id}</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>requestee_type-${aflagtype2_id}</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>second patch, with requestee</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>second patch, with requestee</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Invalid requestees are silently dropped -->
      <tr>
        <td>assertTitle</td>
        <td>Changes Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Retrieve the attachment ID -->
      <tr>
        <td>storeAttribute</td>
        <td>//a[@title='patch, v2']@href</td>
        <td>alink</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${alink}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>attachment2_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Create Another Attachment to Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create New Attachment for Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>data</td>
        <td>/var/www/html/selenium/bugzilla/patch.diff</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>data</td>
        <td>patch.diff</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>patch, v3</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>patch, v3</td>
      </tr>
      <tr>
        <td>click</td>
        <td>list</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>contenttypeselection</td>
        <td>label=plain text (text/plain)</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>contenttypeselection</td>
        <td>label=plain text (text/plain)</td>
      </tr>
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
       <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>one +, the other one blank</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>one +, the other one blank</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Changes Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Retrieve the attachment ID -->
      <tr>
        <td>storeAttribute</td>
        <td>//a[@title='patch, v3']@href</td>
        <td>alink</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${alink}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>attachment3_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumAttachmentFlag1Test? (${admin_user_username})</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumAttachmentFlag2Test?</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We marked the first attachment as obsolete, so it should not have any flag on it -->
      <tr>
        <td>verifyTextPresent</td>
        <td>none</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: SeleniumAttachmentFlag1Test+</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Before logging out, we make the bug public -->
      <tr>
        <td>click</td>
        <td>bit-${master_group}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>bit-${master_group}</td>
        <td>off</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Now log out and log in again using the unprivileged user account -->
      <tr>
        <td>clickAndWait</td>
        <td>link=Log out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Logged Out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log In</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Log in to Bugzilla</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${unprivileged_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${unprivileged_user_passwd}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@name='GoAheadAndLogIn' and @value='Log in']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Main Page</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>open</td>
        <td>${inst}show_bug.cgi?id=${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- no privs are required to clear this flag -->
      <tr>
        <td>select</td>
        <td>flag-${flag3_1_id}</td>
        <td>value=X</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag-${flag3_1_id}</td>
        <td>value=X</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Commit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} processed</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <!-- editbugs privs are required to clear this flag -->
      <tr>
        <td>assertSelectOptions</td>
        <td>flag-${flag2_1_id}</td>
        <td>+</td>
      </tr>
      <!-- cannot set the flag to +, but ? is allowed -->
      <tr>
        <td>assertSelectOptions</td>
        <td>flag_type-${flagtype1_id}</td>
        <td>,?</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='attachment.cgi?id=${attachment2_id}&action=edit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>regexp:(Edit)?\s*Attachment #?${attachment2_id}\s*(Details)? for Bug #?${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>//select[@title="attachmentflag2"]</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@title="attachmentflag2"]</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Unauthorized Action</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>You are not authorized to edit attachment</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>goBackAndWait</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
       <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
     <tr>
        <td>clickAndWait</td>
        <td>link=Add an attachment</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Create New Attachment for Bug #${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>data</td>
        <td>/var/www/html/selenium/bugzilla/patch.diff</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>data</td>
        <td>patch.diff</td>
      </tr>
      <tr>
        <td>type</td>
        <td>description</td>
        <td>patch, v4</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>description</td>
        <td>patch, v4</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>ispatch</td>
        <td>off</td>
      </tr>
      <!-- 2.20 doesn't select it by default -->
      <tr>
        <td>click</td>
        <td>autodetect</td>
        <td>on</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>autodetect</td>
        <td>on</td>
      </tr>
      <!-- editbugs privs are required -->
      <tr>
        <td>assertNotEditable</td>
        <td>flag_type-${aflagtype1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <!-- This flag type has no group associated with it -->
      <tr>
        <td>select</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag_type-${aflagtype2_id}</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>type</td>
        <td>comment</td>
        <td>granting again</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>comment</td>
        <td>granting again</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Changes Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${unprivileged_user_username}: SeleniumAttachmentFlag2Test+</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Logged Out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log In</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Log in to Bugzilla</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@name='GoAheadAndLogIn' and @value='Log in']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Main Page</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>open</td>
        <td>${inst}show_bug.cgi?id=${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – test flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='attachment.cgi?id=${attachment3_id}&action=edit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>regexp:(Edit)?\s*Attachment #?${attachment3_id}\s*(Details)? for Bug #?${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>select</td>
        <td>//select[@title="attachmentflag1"]</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@title="attachmentflag1"]</td>
        <td>label=regexp:\+</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@value='Submit']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Changes Submitted</td>
        <td>&nbsp;</td>
      </tr>
      <!-- OK, now remove these flag types -->
      <tr>
        <td>clickAndWait</td>
        <td>link=Flags</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${flagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Confirm Deletion of Flag Type 'SeleniumBugFlag1Test'</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>Do you really want to delete this type?</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Yes, delete</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>The flag type SeleniumBugFlag1Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${flagtype2_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Confirm Deletion of Flag Type 'SeleniumBugFlag2Test'</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>Do you really want to delete this type?</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Yes, delete</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumBugFlag2Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${flagtype3_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumBugFlag3Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${aflagtype1_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Confirm Deletion of Flag Type 'SeleniumAttachmentFlag1Test'</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>Do you really want to delete this type?</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Yes, delete</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag1Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${aflagtype2_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Confirm Deletion of Flag Type 'SeleniumAttachmentFlag2Test'</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>Do you really want to delete this type?</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>flatlink=Yes, delete</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag2Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${aflagtype3_id}']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Flag Type Deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>The flag type SeleniumAttachmentFlag3Test has been deleted</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log out</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Logged Out</td>
        <td>&nbsp;</td>
      </tr>
      </tbody>
    </table>
  </body>
</html>
