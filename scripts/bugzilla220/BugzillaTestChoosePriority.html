<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Test Choose Priority</title>
  </head>

  <body>
  <table cellpadding="1" cellspacing="1" border="1">
    <thead>
      <tr>
        <td rowspan="1" colspan="3">Bugzilla Test Choose Priority</td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>loadConfigFileAndWait</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>storeParams</td>
        <td>inst branch</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>open</td>
        <td>${inst}editparams.cgi</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>gotoIf</b></td>
        <td>storedVars["branch"] == 222</td>
        <td>bz_222_editparams_1</td>
      </tr>
      <!-- Code for 2.20 -->
      <tr>
        <td>assertTitle</td>
        <td>Edit parameters</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@name='letsubmitterchoosepriority' and @value='0']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@type='submit' and @value='Submit changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Saving new parameters</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>gotoLabel</b></td>
        <td>bz_222_editparams_end_1</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>bz_222_editparams_1</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Code for 2.22 -->
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Configuration: Required Settings</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug Change Policies</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Configuration: Bug Change Policies</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@name='letsubmitterchoosepriority' and @value='0']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@type='submit' and @value='Save Changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Parameters Updated</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>bz_222_editparams_end_1</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=New</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We don't want to fail if classifications are in use -->
      <tr>
        <td><b>assertNoErrorOnNextAndGoto</b></td>
        <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
        <td>jump_classification_end_1</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Unclassified</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>jump_classification_end_1</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug: TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextNotPresent</td>
        <td>Priority</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementNotPresent</td>
        <td>//select[@name='priority']</td>
        <td>&nbsp;</td>
      </tr>
      <!-- There must be no drop down menu to select the priority, but it must still exist as a hidden field -->
      <tr>
        <td>assertAttribute</td>
        <td>//input[@name='priority']@type</td>
        <td>hidden</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Parameters</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>gotoIf</b></td>
        <td>storedVars["branch"] == 222</td>
        <td>bz_222_editparams_2</td>
      </tr>
      <!-- Code for 2.20 -->
      <tr>
        <td>assertTitle</td>
        <td>Edit parameters</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@name='letsubmitterchoosepriority' and @value='1']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@type='submit' and @value='Submit changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Saving new parameters</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>gotoLabel</b></td>
        <td>bz_222_editparams_end_2</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>bz_222_editparams_2</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Code for 2.22 -->
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Configuration: Required Settings</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug Change Policies</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Configuration: Bug Change Policies</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>click</td>
        <td>//input[@name='letsubmitterchoosepriority' and @value='1']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>//input[@type='submit' and @value='Save Changes']</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Parameters Updated</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>bz_222_editparams_end_2</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=New</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We don't want to fail if classifications are in use -->
      <tr>
        <td><b>assertNoErrorOnNextAndGoto</b></td>
        <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
        <td>jump_classification_end_2</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Unclassified</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>jump_classification_end_2</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug: TestProduct</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyTextPresent</td>
        <td>Priority</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyElementPresent</td>
        <td>//select[@name='priority']</td>
        <td>&nbsp;</td>
      </tr>
    </tbody>
  </table>
  </body>
</html>
