<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Test Flags II</title>
  </head>

  <body>
    <table cellpadding="1" cellspacing="1" border="1">
      <thead>
        <tr>
          <td rowspan="1" colspan="3">Bugzilla Test Flags II</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>loadConfigFileAndWait</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>storeParams</td>
          <td>inst admin_user_login admin_user_passwd admin_user_username unprivileged_user_login unprivileged_user_passwd unprivileged_user_username</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}relogin.cgi</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log In</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>log_in</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Main Page</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Flags</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>description</td>
          <td>Available in TestProduct and Another Product/c1</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>description</td>
          <td>Available in TestProduct and Another Product/c1</td>
        </tr>
        <tr>
          <td>select</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-removeInclusion</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=__Any__</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-include</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-include</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
      <!-- This flag type must have a higher sortkey than the one we will create later.
           The reason is that link=selenium will catch the first link with this name in
           the UI, so when the second flag type with this name is created, we have to
           catch it, not this one (which will be unique for now, so no worry to find it). -->
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>100</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>100</td>
      </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_active</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_requestable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>click</td>
          <td>is_multiplicable</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_multiplicable</td>
          <td>off</td>
        </tr>
        <tr>
          <td>select</td>
          <td>grant_group</td>
          <td>label=editbugs</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>grant_group</td>
          <td>label=editbugs</td>
        </tr>
        <tr>
          <td>select</td>
          <td>request_group</td>
          <td>label=canconfirm</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>request_group</td>
          <td>label=canconfirm</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>save</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium has been created</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=selenium</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flagtype1_id</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Create Flag Type For Attachments</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Attachments</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>selenium_review</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>selenium_review</td>
        </tr>
        <tr>
          <td>type</td>
          <td>description</td>
          <td>Review flag used by Selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>description</td>
          <td>Review flag used by Selenium</td>
        </tr>
        <tr>
          <td>select</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-removeInclusion</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Attachments</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-include</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Attachments</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>100</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>100</td>
      </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_active</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_requestable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>click</td>
          <td>is_multiplicable</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_multiplicable</td>
          <td>off</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>grant_group</td>
          <td>label=(no group)</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>request_group</td>
          <td>label=(no group)</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>save</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Created</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>The flag type selenium_review has been created</td>
        <td>&nbsp;</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Back to flag types.</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=selenium_review</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>aflagtype1_id</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Create Flag Type For Attachments</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Attachments</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>selenium_review</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>selenium_review</td>
        </tr>
        <tr>
          <td>type</td>
          <td>description</td>
          <td>Another review flag used by Selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>description</td>
          <td>Another review flag used by Selenium</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-exclude</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Attachments</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>50</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>50</td>
      </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_active</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_requestable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_multiplicable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>select</td>
          <td>grant_group</td>
          <td>label=editbugs</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>grant_group</td>
          <td>label=editbugs</td>
        </tr>
        <tr>
          <td>select</td>
          <td>request_group</td>
          <td>label=canconfirm</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>request_group</td>
          <td>label=canconfirm</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>save</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium_review has been created</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=selenium_review</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>aflagtype2_id</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=New</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td><b>assertNoErrorOnNextAndGoto</b></td>
        <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
        <td>jump_classification_end_1</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Unclassified</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>jump_classification_end_1</td>
        <td>&nbsp;</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=TestProduct</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Enter Bug: TestProduct</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>label=+</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>label=+</td>
        </tr>
        <tr>
          <td>type</td>
          <td>short_desc</td>
          <td>The selenium flag should be kept on product change</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>short_desc</td>
          <td>The selenium flag should be kept on product change</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>pom</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>pom</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@value='Add an attachment']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>data</td>
          <td>/var/www/html/selenium/bugzilla/patch.diff</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>data</td>
          <td>patch.diff</td>
        </tr>
        <tr>
          <td>type</td>
          <td>description</td>
          <td>small patch</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>description</td>
          <td>small patch</td>
        </tr>
        <tr>
          <td>click</td>
          <td>ispatch</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>ispatch</td>
          <td>on</td>
        </tr>
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag_type-${aflagtype1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>flag_type-${aflagtype2_id}</td>
          <td>label=-</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag_type-${aflagtype2_id}</td>
          <td>label=-</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>regexp:Bug \d+ Submitted</td>
          <td>&nbsp;</td>
        </tr>
      <!-- Save the bug ID -->
      <tr>
        <td>storeValue</td>
        <td>//input[@name='id' and @type='hidden']</td>
        <td>bug1_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – The selenium flag should be kept on product change</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: selenium</td>
        <td>&nbsp;</td>
      </tr>
      <!-- Store the flag ID -->
      <tr>
        <td>storeAttribute</td>
        <td>//select[@title="Available in TestProduct and Another Product/c1"]@id</td>
        <td>flagid</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flagid}</td>
        <td>(?:flag-(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flag1_id</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>flag-${flag1_id}</td>
        <td>label=regexp:\+</td>
      </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>admin: selenium_review-</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>Moving to Another Product / c1. The flag should be preserved.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>Moving to Another Product / c1. The flag should be preserved.</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Verify New Product Details...</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>change_product</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug1_id} processed</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – The selenium flag should be kept on product change</td>
        <td>&nbsp;</td>
      </tr>
        <!-- The flag must survive -->
        <tr>
          <td>verifySelected</td>
          <td>flag-${flag1_id}</td>
          <td>label=regexp:\+</td>
        </tr>
        <!-- ... the attachment flag too -->
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>admin: selenium_review-</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>Moving to c2. The selenium flag will be deleted.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>Moving to c2. The selenium flag will be deleted.</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug1_id} processed</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=bug ${bug1_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug1_id} – The selenium flag should be kept on product change</td>
        <td>&nbsp;</td>
      </tr>
        <!-- The flag didn't survive -->
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag-${flag1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <!-- ... but the attachment flag is still there. -->
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>admin: selenium_review-</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=New</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td><b>assertNoErrorOnNextAndGoto</b></td>
        <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
        <td>jump_classification_end_2</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Enter Bug</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Unclassified</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td><b>label</b></td>
        <td>jump_classification_end_2</td>
        <td>&nbsp;</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Another Product</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Enter Bug: Another Product</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>type</td>
          <td>assigned_to</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>assigned_to</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>assertNotEditable</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c1</td>
        </tr>
        <tr>
          <td>assertEditable</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>label=?</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>label=regexp:\?</td>
        </tr>
        <tr>
          <td>type</td>
          <td>short_desc</td>
          <td>Create a new selenium flag for c2</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>short_desc</td>
          <td>Create a new selenium flag for c2</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>.</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>regexp:Bug \d+ Submitted</td>
          <td>&nbsp;</td>
        </tr>
      <!-- Save the bug ID -->
      <tr>
        <td>storeValue</td>
        <td>//input[@name='id' and @type='hidden']</td>
        <td>bug2_id</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Bug ${bug2_id}</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>verifyFlatTextPresent</td>
        <td>${admin_user_username}: selenium</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>storeAttribute</td>
        <td>//select[@title="Available in TestProduct and Another Product/c1"]@id</td>
        <td>flagid</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flagid}</td>
        <td>(?:flag-(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flag2_id</td>
      </tr>
      <tr>
        <td>verifySelected</td>
        <td>//select[@id="flag-${flag2_id}"]</td>
        <td>label=regexp:\?</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Flags</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>description</td>
          <td>Another flag with the selenium name</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>description</td>
          <td>Another flag with the selenium name</td>
        </tr>
        <tr>
          <td>select</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>inclusion_to_remove</td>
          <td>label=__Any__:__Any__</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-removeInclusion</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=Another Product</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>categoryAction-include</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Create Flag Type for Bugs</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>type</td>
        <td>sortkey</td>
        <td>50</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>sortkey</td>
        <td>50</td>
      </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_active</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_requestable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>is_multiplicable</td>
          <td>on</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>grant_group</td>
          <td>label=(no group)</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>request_group</td>
          <td>label=(no group)</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>save</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium has been created</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Back to flag types.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Administer Flag Types</td>
        <td>&nbsp;</td>
      </tr>
      <!-- We have to store the new flag type ID -->
      <tr>
        <td>storeURLOfLink</td>
        <td>link=selenium</td>
        <td>flag_url</td>
      </tr>
      <tr>
        <td>parseString</td>
        <td>${flag_url}</td>
        <td>(?:id=(\d+))</td>
      </tr>
      <tr>
        <td>store</td>
        <td>javascript{storedVars["_match"][2]}</td>
        <td>flagtype2_id</td>
      </tr>
        <tr>
          <td>type</td>
          <td>quicksearch</td>
          <td>${bug2_id}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>find_top</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>component</td>
          <td>label=c2</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>The selenium flag should be preserved.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>The selenium flag should be preserved.</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} processed</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=bug ${bug2_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag-${flag2_id}</td>
          <td>regexp:\?</td>
        </tr>
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>regexp:\?</td>
        </tr>
        <tr>
          <td>assertElementPresent</td>
          <td>flag_type-${flagtype2_id}</td>
          <td>regexp:\?</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log In</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${unprivileged_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${unprivileged_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${unprivileged_user_passwd}</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>log_in</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Main Page</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>document.forms[0].quicksearch</td>
          <td>${bug2_id}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>document.forms[0].quicksearch</td>
          <td>${bug2_id}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>find_top</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>flag-${flag2_id}</td>
          <td>label=+</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag-${flag2_id}</td>
          <td>label=regexp:\+</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} processed</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=bug ${bug2_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>flag-${flag2_id}</td>
          <td>label=regexp:\+</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>selenium flag will be lost. I don't have editbugs privs.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>selenium flag will be lost. I don't have editbugs privs.</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Verify New Product Details...</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>change_product</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} processed</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=bug ${bug2_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug2_id} – Create a new selenium flag for c2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag-${flag2_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertNotEditable</td>
          <td>flag_type-${flagtype1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertElementNotPresent</td>
          <td>flag_type-${flagtype2_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
      <tr>
        <td>clickAndWait</td>
        <td>link=Log in again.</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Log in to Bugzilla</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_login</td>
        <td>${admin_user_login}</td>
      </tr>
      <tr>
        <td>type</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>verifyValue</td>
        <td>Bugzilla_password</td>
        <td>${admin_user_passwd}</td>
      </tr>
      <tr>
        <td>clickAndWait</td>
        <td>log_in</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td>assertTitle</td>
        <td>Bugzilla Main Page</td>
        <td>&nbsp;</td>
      </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Flags</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${flagtype1_id}']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium has been deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Back to flag types.</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${flagtype2_id}']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium has been deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Back to flag types.</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${aflagtype1_id}']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Confirm Deletion of Flag Type 'selenium_review'</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Yes, delete</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium_review has been deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Back to flag types.</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Administer Flag Types</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href='editflagtypes.cgi?action=confirmdelete&id=${aflagtype2_id}']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Flag Type Deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The flag type selenium_review has been deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
