<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>BugzillaTestQAcontact</title>
  </head>

  <body>
    <table cellpadding="1" cellspacing="1" border="1">
      <thead>
        <tr>
          <td rowspan="1" colspan="3">Bugzilla Test QA Contact</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>loadConfigFileAndWait</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>storeParams</td>
          <td>inst branch master_group admin_user_login admin_user_passwd
              unprivileged_user_login unprivileged_user_passwd</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}relogin.cgi</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log In</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_login</td>
          <td>${admin_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_login</td>
          <td>${admin_user_login}</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_password</td>
          <td>${admin_user_passwd}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_password</td>
          <td>${admin_user_passwd}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type='submit' and @value='Log in']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Main Page</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}buglist.cgi?cmdtype=dorem&remaction=forget&namedcmd=My%20QA%20query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search is gone</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>OK, the My QA query search is gone</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Parameters</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Required Settings</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name='useqacontact' and @value='1']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type='submit' and @value='Save Changes']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Parameters Updated</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=New</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>assertNoErrorOnNextAndGoto</b></td>
          <td>Actual value 'Select Classification' did not match 'Enter Bug'</td>
          <td>classification_end_1</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Enter Bug</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Unclassified</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>label</b></td>
          <td>classification_end_1</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=TestProduct</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Enter Bug: TestProduct</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>qa_contact</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>qa_contact</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>type</td>
          <td>short_desc</td>
          <td>Test for QA contact</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>short_desc</td>
          <td>Test for QA contact</td>
        </tr>
        <tr>
          <td>type</td>
          <td>comment</td>
          <td>This is a test to check QA contact privs.</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>comment</td>
          <td>This is a test to check QA contact privs.</td>
        </tr>
        <tr>
          <td>click</td>
          <td>bit-${master_group}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>bit-${master_group}</td>
          <td>on</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>regexp:Bug \d+ Submitted</td>
          <td>&nbsp;</td>
        </tr>
        <!-- Save the bug ID. We will come back to it later -->
        <tr>
          <td>storeValue</td>
          <td>//input[@name='id' and @type='hidden']</td>
          <td>bug1_id</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}query.cgi?format=advanced</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search for bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>selectNone</td>
          <td>bug_status</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>emailassigned_to1</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>emailassigned_to1</td>
          <td>off</td>
        </tr>
        <tr>
          <td>select</td>
          <td>field0-0-0</td>
          <td>label=QAContact</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>field0-0-0</td>
          <td>label=QAContact</td>
        </tr>
        <tr>
          <td>select</td>
          <td>type0-0-0</td>
          <td>label=is equal to</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>type0-0-0</td>
          <td>label=is equal to</td>
        </tr>
        <tr>
          <td>type</td>
          <td>value0-0-0</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>value0-0-0</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>Search</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug List</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Test for QA contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>save_newqueryname</td>
          <td>My QA query</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>save_newqueryname</td>
          <td>My QA query</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>remember</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Message</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>OK, you have a new search named My QA query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=My QA query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug List: My QA query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Test for QA contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Parameters</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Required Settings</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>useqacontact-off</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type='submit' and @value='Save Changes']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Parameters Updated</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=My QA query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug List: My QA query</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>One bug found</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug1_id} – Test for QA contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>QA Contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>quicksearch</td>
          <td>${bug1_id}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>quicksearch</td>
          <td>${bug1_id}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>find_top</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Access Denied</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>You are not authorized to access bug</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>flatlink=log in to an account</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_login</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_login</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_password</td>
          <td>${unprivileged_user_passwd}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_password</td>
          <td>${unprivileged_user_passwd}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>log_in</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Access Denied</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>You are not authorized to access bug</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log In</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_login</td>
          <td>${admin_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_login</td>
          <td>${admin_user_login}</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_password</td>
          <td>${admin_user_passwd}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_password</td>
          <td>${admin_user_passwd}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>log_in</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Main Page</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Parameters</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Required Settings</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>exact:Configuration: Bug Fields</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>useqacontact-on</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type='submit' and @value='Save Changes']</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Parameters Updated</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log in again.</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Log in to Bugzilla</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_login</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_login</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>type</td>
          <td>Bugzilla_password</td>
          <td>${unprivileged_user_passwd}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>Bugzilla_password</td>
          <td>${unprivileged_user_passwd}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>log_in</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bugzilla Main Page</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Preferences</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User Preferences</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>state_addselfcc</td>
          <td>label=Never</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>state_addselfcc</td>
          <td>label=Never</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>update</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User Preferences</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Search</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search for bugs</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>verifySelected</td>
          <td>product</td>
          <td>label=TestProduct</td>
        </tr>
        <tr>
          <td>selectNone</td>
          <td>bug_status</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>field0-0-0</td>
          <td>label=QAContact</td>
        </tr>
        <tr>
          <td>select</td>
          <td>type0-0-0</td>
          <td>label=is equal to</td>
        </tr>
        <tr>
          <td>type</td>
          <td>value0-0-0</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>value0-0-0</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>Search</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug List</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>One bug found</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>Test for QA contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug1_id} – Test for QA contact</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>qa_contact</td>
          <td>${unprivileged_user_login}</td>
        </tr>
        <tr>
          <td>click</td>
          <td>knob-reassign-cmp</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>commit</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Bug ${bug1_id} processed</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>(list of e-mails not available)</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=bug ${bug1_id}</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Access Denied</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Log out</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Logged Out</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
