<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
    <title>Test User Group</title>
  </head>

  <body>
    <table cellpadding="1" cellspacing="1" border="1">
      <thead>
        <tr>
          <td rowspan="1" colspan="3">Bugzilla Test User Group</td>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>loadConfigFileAndWait</td>
          <td>&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>storeParams</td>
          <td>inst branch master_group slave_group</td>
          <td>&nbsp;</td>
        </tr>
        <!-- First, make sure the Master, Slave and Reg users have been deleted, else do it now. -->
        <!-- This script doesn't delete them before exiting because they may be used by other scripts -->
        <tr>
          <td><b>label</b></td>
          <td>cleanup_start</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}editusers.cgi?action=list&matchstr=%28master%7Cslave%7Creg%29-selenium%40selenium.bugzilla.org&matchtype=regexp</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>assertNoErrorOnNextAndGoto</b></td>
          <td>'-selenium@selenium.bugzilla.org' was found in page text.</td>
          <td>cleanup_end</td>
        </tr>
        <tr>
          <td>assertTextNotPresent</td>
          <td>-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Delete</td>
          <td>&nbsp;</td>
        </tr>
        <!-- This is a critial check! Do not delete the wrong user! -->
        <tr>
          <td>assertTitle</td>
          <td>regexp:Confirm deletion of user (master|slave|reg)-selenium@selenium\.bugzilla\.org</td>
          <td>&nbsp;</td>
        </tr>
        <!-- If this text is present, deleting the user would create referential integrity problems -->
        <tr>
          <td>assertTextNotPresent</td>
          <td>highly not recommended</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Yes, delete"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>regexp:User (master|slave|reg)-selenium@selenium\.bugzilla\.org deleted</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>gotoLabel</b></td>
          <td>cleanup_start</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>label</b></td>
          <td>cleanup_end</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>open</td>
          <td>${inst}editgroups.cgi</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Edit Groups</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href="editgroups.cgi?action=changeform&amp;group=${slave_group}"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Change Group: Slave</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>regexp</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>regexp</td>
          <td>&nbsp;</td>
        </tr>
        <!-- The checkbox should previously be off. If it's on, turn it off. -->
        <tr>
          <td><b>assertNoErrorOnNextAndGoto</b></td>
          <td>Actual value 'on' did not match 'off'</td>
          <td>jump_checkbox_1</td>
        </tr>
        <tr>
          <td>assertValue</td>
          <td>//input[@name="grp-${master_group}" and @value="1"]</td>
          <td>off</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grp-${master_group}" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>label</b></td>
          <td>jump_checkbox_1</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Save Changes"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Updating group hierarchy</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=add a new user</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Add user</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>login</td>
          <td>master-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>login</td>
          <td>master-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>Master Selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>Master Selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Add"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User master-selenium@selenium.bugzilla.org created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="group_${master_group}" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Update"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User master-selenium@selenium.bugzilla.org updated</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The account has been added to the Master group</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[contains(text(),'add
    a new user')]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Add user</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>login</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>login</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>Slave Selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>Slave Selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Add"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User slave-selenium@selenium.bugzilla.org created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="group_${slave_group}" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Update"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User slave-selenium@selenium.bugzilla.org updated</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyFlatTextPresent</td>
          <td>The account has been added to the Slave group</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[contains(text(),'add
    a new user')]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Add user</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>login</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>login</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
        </tr>
        <tr>
          <td>type</td>
          <td>name</td>
          <td>Reg Selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>name</td>
          <td>Reg Selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>password</td>
          <td>selenium</td>
        </tr>
        <tr>
          <td>type</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>disabledtext</td>
          <td>Not for common usage</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Add"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>User reg-selenium@selenium.bugzilla.org created</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=find other users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grouprestrict" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>groupid</td>
          <td>label=Master</td>
        </tr>
        <tr>
          <td>select</td>
          <td>matchtype</td>
          <td>value=substr</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Search"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>master-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Master Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Slave Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Reg Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=find other users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grouprestrict" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>groupid</td>
          <td>label=Slave</td>
        </tr>
        <tr>
          <td>select</td>
          <td>matchtype</td>
          <td>value=substr</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Search"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Slave Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>master-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Master Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Reg Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Groups</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Edit Groups</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//a[@href="editgroups.cgi?action=changeform&amp;group=${slave_group}"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Change Group: Slave</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>type</td>
          <td>regexp</td>
          <td>^reg-selenium\@.*$</td>
        </tr>
        <tr>
          <td>verifyValue</td>
          <td>regexp</td>
          <td>^reg-selenium\@.*$</td>
        </tr>
        <!-- The checkbox should previously be off. If it's on already, let it alone. -->
        <tr>
          <td><b>assertNoErrorOnNextAndGoto</b></td>
          <td>Actual value 'off' did not match 'on'</td>
          <td>jump_checkbox_2</td>
        </tr>
        <tr>
          <td>assertValue</td>
          <td>//input[@name="grp-${master_group}" and @value="1"]</td>
          <td>on</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grp-${master_group}" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><b>label</b></td>
          <td>jump_checkbox_2</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Save Changes"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Updating group hierarchy</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=Users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grouprestrict" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>groupid</td>
          <td>label=Master</td>
        </tr>
        <tr>
          <td>select</td>
          <td>matchtype</td>
          <td>value=substr</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Search"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>master-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Master Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Slave Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextNotPresent</td>
          <td>Reg Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>link=find other users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>assertTitle</td>
          <td>Search users</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>click</td>
          <td>//input[@name="grouprestrict" and @value="1"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>select</td>
          <td>groupid</td>
          <td>label=Slave</td>
        </tr>
        <tr>
          <td>select</td>
          <td>matchtype</td>
          <td>value=substr</td>
        </tr>
        <tr>
          <td>clickAndWait</td>
          <td>//input[@type="submit" and @value="Search"]</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>slave-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Slave Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>master-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Master Selenium</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>reg-selenium@selenium.bugzilla.org</td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td>verifyTextPresent</td>
          <td>Reg Selenium</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
